<!--
slug: using-fixtures-sqlite3-for-dev-django
date: Sat Nov 14 2009 08:17:51 GMT+0100 (CET)
tags: django, webdev, awesomecode
title: Using Fixtures and SQLite for easy dev in Django
id: 243414048
link: http://joreteg.com/post/243414048/using-fixtures-sqlite3-for-dev-django
raw: {"blog_name":"henrikjoreteg","id":243414048,"post_url":"http://joreteg.com/post/243414048/using-fixtures-sqlite3-for-dev-django","slug":"using-fixtures-sqlite3-for-dev-django","type":"text","date":"2009-11-14 07:17:51 GMT","timestamp":1258183071,"state":"published","format":"markdown","reblog_key":"GvfGK1hP","tags":["django","webdev","awesomecode"],"short_url":"http://tmblr.co/ZgL_YyEWZGW","recommended_source":null,"recommended_color":null,"highlighted":[],"note_count":0,"title":"Using Fixtures and SQLite for easy dev in Django","body":"<p>When I&rsquo;m building out a new app I don&rsquo;t want to deal with setting up databases or repeatedly entering dummy data if I make changes to my models. Django fixtures and SQLite to the rescue!</p>\n\n<p>Here&rsquo;s how I do it:</p>\n\n<p>In my <code>settings.py</code> here are my relevant db settings:</p>\n\n<pre><code># create site root variable\nimport os \nSITE_ROOT = os.path.dirname(os.path.realpath(__file__))\n\nDATABASE_ENGINE = 'sqlite3'\nDATABASE_NAME = os.path.join(SITE_ROOT, 'dev.db')\nDATABASE_USER = ''\nDATABASE_PASSWORD = ''\n</code></pre>\n\n<p>Now, when I define my <code>models.py</code> and then run <code>python manage.py syncdb</code>, Django will create all the tables for me based on my models and put the entire database in a single self-contained file called <code>dev.db</code> at the root of my project folder.</p>\n\n<p>Then I can enter my test data in the amazing auto-generated django admin.</p>\n\n<p>Now, to create my fixtures, all I have to do it run:</p>\n\n<pre><code>python manage.py dumpdata --indent=4 &gt; my_app_name/fixtures/initial_data.json\n</code></pre>\n\n<p>(If your django app doesn&rsquo;t already have a &ldquo;fixtures&rdquo; directory, you&rsquo;ll have to create it first.)</p>\n\n<p>This command will write all your data to a JSON file. The <code>--indent=4</code> flag is just so it&rsquo;s easier to read. But after running this command look in your fixtures folder you&rsquo;ll see a <code>initial_data.json</code> file that looks something like this:</p>\n\n<pre><code>[\n  {\n    \"model\": \"myapp.person\",\n    \"pk\": 1,\n    \"fields\": {\n      \"first_name\": \"John\",\n      \"last_name\": \"Lennon\"\n    }\n  },\n  {\n    \"model\": \"myapp.person\",\n    \"pk\": 2,\n    \"fields\": {\n      \"first_name\": \"Paul\",\n      \"last_name\": \"McCartney\"\n    }\n  }\n]\n</code></pre>\n\n<p>But here&rsquo;s the kicker&hellip; now, if for some reason you need to delete your entire <code>dev.db</code> database, all you have to do is run <code>python manage.py syncdb</code>, and it will automatically re-inflate the database with all your test data! Pretty freakin&rsquo; sweet eh? (no I&rsquo;m not canadian).</p>\n\n<p>Obviously, if you make changes to your models that the dummy data incorrect, this trick won&rsquo;t help you much. But it&rsquo;s perfect for the models that probably won&rsquo;t change so much during development.</p>\n\n<p>So, thanks to Django you can now quickly whip up a prototype without having to build a database or worry about database drivers, AND you can even completely delete your database without losing all your test/dummy data. So sweet!</p>\n\n<p>This one deserves the  #awesomecode tag IMHO.</p>","reblog":{"tree_html":"","comment":"<p>When I’m building out a new app I don’t want to deal with setting up databases or repeatedly entering dummy data if I make changes to my models. Django fixtures and SQLite to the rescue!</p>\n\n<p>Here’s how I do it:</p>\n\n<p>In my <code>settings.py</code> here are my relevant db settings:</p>\n\n<pre><code># create site root variable\nimport os \nSITE_ROOT = os.path.dirname(os.path.realpath(__file__))\n\nDATABASE_ENGINE = 'sqlite3'\nDATABASE_NAME = os.path.join(SITE_ROOT, 'dev.db')\nDATABASE_USER = ''\nDATABASE_PASSWORD = ''\n</code></pre>\n\n<p>Now, when I define my <code>models.py</code> and then run <code>python manage.py syncdb</code>, Django will create all the tables for me based on my models and put the entire database in a single self-contained file called <code>dev.db</code> at the root of my project folder.</p>\n\n<p>Then I can enter my test data in the amazing auto-generated django admin.</p>\n\n<p>Now, to create my fixtures, all I have to do it run:</p>\n\n<pre><code>python manage.py dumpdata --indent=4 > my_app_name/fixtures/initial_data.json\n</code></pre>\n\n<p>(If your django app doesn’t already have a “fixtures” directory, you’ll have to create it first.)</p>\n\n<p>This command will write all your data to a JSON file. The <code>--indent=4</code> flag is just so it’s easier to read. But after running this command look in your fixtures folder you’ll see a <code>initial_data.json</code> file that looks something like this:</p>\n\n<pre><code>[\n  {\n    \"model\": \"myapp.person\",\n    \"pk\": 1,\n    \"fields\": {\n      \"first_name\": \"John\",\n      \"last_name\": \"Lennon\"\n    }\n  },\n  {\n    \"model\": \"myapp.person\",\n    \"pk\": 2,\n    \"fields\": {\n      \"first_name\": \"Paul\",\n      \"last_name\": \"McCartney\"\n    }\n  }\n]\n</code></pre>\n\n<p>But here’s the kicker… now, if for some reason you need to delete your entire <code>dev.db</code> database, all you have to do is run <code>python manage.py syncdb</code>, and it will automatically re-inflate the database with all your test data! Pretty freakin’ sweet eh? (no I’m not canadian).</p>\n\n<p>Obviously, if you make changes to your models that the dummy data incorrect, this trick won’t help you much. But it’s perfect for the models that probably won’t change so much during development.</p>\n\n<p>So, thanks to Django you can now quickly whip up a prototype without having to build a database or worry about database drivers, AND you can even completely delete your database without losing all your test/dummy data. So sweet!</p>\n\n<p>This one deserves the  #awesomecode tag IMHO.</p>"},"trail":[{"blog":{"name":"henrikjoreteg","active":true,"theme":{"header_full_width":1500,"header_full_height":500,"header_focus_width":676,"header_focus_height":380,"avatar_shape":"circle","background_color":"#F6F6F6","body_font":"Helvetica Neue","header_bounds":"0,1249,380,573","header_image":"http://static.tumblr.com/df7befc8b0387cf597578e613c221cb3/uzkwgdq/FAjnt7hyg/tumblr_static_agmw2bdhkjs4ws4sscw44swgc.jpg","header_image_focused":"http://static.tumblr.com/df7befc8b0387cf597578e613c221cb3/uzkwgdq/1oSnt7hyh/tumblr_static_tumblr_static_agmw2bdhkjs4ws4sscw44swgc_focused_v3.jpg","header_image_scaled":"http://static.tumblr.com/df7befc8b0387cf597578e613c221cb3/uzkwgdq/FAjnt7hyg/tumblr_static_agmw2bdhkjs4ws4sscw44swgc_2048_v2.jpg","header_stretch":true,"link_color":"#529ECC","show_avatar":true,"show_description":true,"show_header_image":true,"show_title":true,"title_color":"#444444","title_font":"Helvetica Neue","title_font_weight":"bold"}},"post":{"id":"243414048"},"content_raw":"<p>When I’m building out a new app I don’t want to deal with setting up databases or repeatedly entering dummy data if I make changes to my models. Django fixtures and SQLite to the rescue!</p>\n\n<p>Here’s how I do it:</p>\n\n<p>In my <code>settings.py</code> here are my relevant db settings:</p>\n\n<pre><code># create site root variable\nimport os \nSITE_ROOT = os.path.dirname(os.path.realpath(__file__))\n\nDATABASE_ENGINE = 'sqlite3'\nDATABASE_NAME = os.path.join(SITE_ROOT, 'dev.db')\nDATABASE_USER = ''\nDATABASE_PASSWORD = ''\n</code></pre>\n\n<p>Now, when I define my <code>models.py</code> and then run <code>python manage.py syncdb</code>, Django will create all the tables for me based on my models and put the entire database in a single self-contained file called <code>dev.db</code> at the root of my project folder.</p>\n\n<p>Then I can enter my test data in the amazing auto-generated django admin.</p>\n\n<p>Now, to create my fixtures, all I have to do it run:</p>\n\n<pre><code>python manage.py dumpdata --indent=4 > my_app_name/fixtures/initial_data.json\n</code></pre>\n\n<p>(If your django app doesn’t already have a “fixtures” directory, you’ll have to create it first.)</p>\n\n<p>This command will write all your data to a JSON file. The <code>--indent=4</code> flag is just so it’s easier to read. But after running this command look in your fixtures folder you’ll see a <code>initial_data.json</code> file that looks something like this:</p>\n\n<pre><code>[\n  {\n    \"model\": \"myapp.person\",\n    \"pk\": 1,\n    \"fields\": {\n      \"first_name\": \"John\",\n      \"last_name\": \"Lennon\"\n    }\n  },\n  {\n    \"model\": \"myapp.person\",\n    \"pk\": 2,\n    \"fields\": {\n      \"first_name\": \"Paul\",\n      \"last_name\": \"McCartney\"\n    }\n  }\n]\n</code></pre>\n\n<p>But here’s the kicker… now, if for some reason you need to delete your entire <code>dev.db</code> database, all you have to do is run <code>python manage.py syncdb</code>, and it will automatically re-inflate the database with all your test data! Pretty freakin’ sweet eh? (no I’m not canadian).</p>\n\n<p>Obviously, if you make changes to your models that the dummy data incorrect, this trick won’t help you much. But it’s perfect for the models that probably won’t change so much during development.</p>\n\n<p>So, thanks to Django you can now quickly whip up a prototype without having to build a database or worry about database drivers, AND you can even completely delete your database without losing all your test/dummy data. So sweet!</p>\n\n<p>This one deserves the  #awesomecode tag IMHO.</p>","content":"<p>When I’m building out a new app I don’t want to deal with setting up databases or repeatedly entering dummy data if I make changes to my models. Django fixtures and SQLite to the rescue!</p>\n\n<p>Here’s how I do it:</p>\n\n<p>In my <code>settings.py</code> here are my relevant db settings:</p>\n\n<pre><code># create site root variable\nimport os \nSITE_ROOT = os.path.dirname(os.path.realpath(__file__))\n\nDATABASE_ENGINE = 'sqlite3'\nDATABASE_NAME = os.path.join(SITE_ROOT, 'dev.db')\nDATABASE_USER = ''\nDATABASE_PASSWORD = ''\n</code></pre>\n\n<p>Now, when I define my <code>models.py</code> and then run <code>python manage.py syncdb</code>, Django will create all the tables for me based on my models and put the entire database in a single self-contained file called <code>dev.db</code> at the root of my project folder.</p>\n\n<p>Then I can enter my test data in the amazing auto-generated django admin.</p>\n\n<p>Now, to create my fixtures, all I have to do it run:</p>\n\n<pre><code>python manage.py dumpdata --indent=4 &gt; my_app_name/fixtures/initial_data.json\n</code></pre>\n\n<p>(If your django app doesn’t already have a “fixtures” directory, you’ll have to create it first.)</p>\n\n<p>This command will write all your data to a JSON file. The <code>--indent=4</code> flag is just so it’s easier to read. But after running this command look in your fixtures folder you’ll see a <code>initial_data.json</code> file that looks something like this:</p>\n\n<pre><code>[\n  {\n    \"model\": \"myapp.person\",\n    \"pk\": 1,\n    \"fields\": {\n      \"first_name\": \"John\",\n      \"last_name\": \"Lennon\"\n    }\n  },\n  {\n    \"model\": \"myapp.person\",\n    \"pk\": 2,\n    \"fields\": {\n      \"first_name\": \"Paul\",\n      \"last_name\": \"McCartney\"\n    }\n  }\n]\n</code></pre>\n\n<p>But here’s the kicker… now, if for some reason you need to delete your entire <code>dev.db</code> database, all you have to do is run <code>python manage.py syncdb</code>, and it will automatically re-inflate the database with all your test data! Pretty freakin’ sweet eh? (no I’m not canadian).</p>\n\n<p>Obviously, if you make changes to your models that the dummy data incorrect, this trick won’t help you much. But it’s perfect for the models that probably won’t change so much during development.</p>\n\n<p>So, thanks to Django you can now quickly whip up a prototype without having to build a database or worry about database drivers, AND you can even completely delete your database without losing all your test/dummy data. So sweet!</p>\n\n<p>This one deserves the  #awesomecode tag IMHO.</p>","is_current_item":true,"is_root_item":true}]}
publish: 2009-11-014
-->


<p>When I&rsquo;m building out a new app I don&rsquo;t want to deal with setting up databases or repeatedly entering dummy data if I make changes to my models. Django fixtures and SQLite to the rescue!</p>

<p>Here&rsquo;s how I do it:</p>

<p>In my <code>settings.py</code> here are my relevant db settings:</p>

<pre><code># create site root variable
import os 
SITE_ROOT = os.path.dirname(os.path.realpath(__file__))

DATABASE_ENGINE = 'sqlite3'
DATABASE_NAME = os.path.join(SITE_ROOT, 'dev.db')
DATABASE_USER = ''
DATABASE_PASSWORD = ''
</code></pre>

<p>Now, when I define my <code>models.py</code> and then run <code>python manage.py syncdb</code>, Django will create all the tables for me based on my models and put the entire database in a single self-contained file called <code>dev.db</code> at the root of my project folder.</p>

<p>Then I can enter my test data in the amazing auto-generated django admin.</p>

<p>Now, to create my fixtures, all I have to do it run:</p>

<pre><code>python manage.py dumpdata --indent=4 &gt; my_app_name/fixtures/initial_data.json
</code></pre>

<p>(If your django app doesn&rsquo;t already have a &ldquo;fixtures&rdquo; directory, you&rsquo;ll have to create it first.)</p>

<p>This command will write all your data to a JSON file. The <code>--indent=4</code> flag is just so it&rsquo;s easier to read. But after running this command look in your fixtures folder you&rsquo;ll see a <code>initial_data.json</code> file that looks something like this:</p>

<pre><code>[
  {
    "model": "myapp.person",
    "pk": 1,
    "fields": {
      "first_name": "John",
      "last_name": "Lennon"
    }
  },
  {
    "model": "myapp.person",
    "pk": 2,
    "fields": {
      "first_name": "Paul",
      "last_name": "McCartney"
    }
  }
]
</code></pre>

<p>But here&rsquo;s the kicker&hellip; now, if for some reason you need to delete your entire <code>dev.db</code> database, all you have to do is run <code>python manage.py syncdb</code>, and it will automatically re-inflate the database with all your test data! Pretty freakin&rsquo; sweet eh? (no I&rsquo;m not canadian).</p>

<p>Obviously, if you make changes to your models that the dummy data incorrect, this trick won&rsquo;t help you much. But it&rsquo;s perfect for the models that probably won&rsquo;t change so much during development.</p>

<p>So, thanks to Django you can now quickly whip up a prototype without having to build a database or worry about database drivers, AND you can even completely delete your database without losing all your test/dummy data. So sweet!</p>

<p>This one deserves the  #awesomecode tag IMHO.</p>
